<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新闻</title>
    <script src="../static/js/jQuery v3.1.1.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="iceStone <ice@wedn.net>">

    <link rel="shortcut icon" href="../static/favicon.ico">
    <link rel="stylesheet" href="../static/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="../static/css/nav.css">
    <link rel="stylesheet" href="../static/css/footer.css">
    <link rel="stylesheet" href="../static/css/goTop.css">
    <link rel="stylesheet" href="../static/css/main.css">
    <script src="../static/js/echarts.js"></script>
    <script src="../static/js/echarts-gl.min.js"></script>
    <script src="../static/theme/dark.js"></script>
    <script src="../static/js/world.js"></script>
</head>
<body>
<nav class="navbar navbar-default vivioNav">
    <div class="container" style="background: #101010">
        <div class="navbar-header">
            <a id="vivio-navbar-brand" href="/" style="color: white"></a>
            <a id="newVersion" href="/" style="color: white">北邮图虫系统</a>
        </div>
        <div class="collapse navbar-collapse" id="vivio-navbar-collapse">
            <ul class="nav navbar-nav vivio-navbar-nav">
                <li class="active"><a href="/" style="color:#000000">首页 <span class="sr-only">(current)</span></a></li>
                <li id="vivio-product-link">
                    <a style="color:white">核心产品</a>
                    <!-- 产品下拉导航菜单 -->
                    <div class="vivio-product">
                    </div>
                    <!-- /产品下拉导航菜单 -->
                </li>
                <li id="vivio-product-link">
                    <a style="color:white">解决方案</a>
                    <div class="vivio-product">
                    </div>
                </li>
                <li id="vivio-product-link">
                    <a style="color:white" href="/weibo_search">图虫实验室</a>
                    <div class="vivio-product">
                        <div class="vivio-container clearfix">
                            <dl>
                                <dt><a href="/weibo_search">实体属性查询</a></dt>
                                <dt><a href="/weibo_search">路径搜索模型</a></dt>
                                <dt><a href="/answer">智能问答系统</a></dt>
                                <dt><a href="/evaluation">信任评估模型</a></dt>
                            </dl>
                            <dl>
                                <dt><a href="/weibo_search">nlp分词技术</a></dt>
                                <dt><a href="/weibo_search">nlp情感分析</a></dt>
                                <dt><a href="/weibo_search">关系纠错与补全模型</a></dt>
                                <dt><a href="/weibo_search">歧义关系查询</a></dt>
                            </dl>
                            <dl>
                                <dt><a href="/weibo_search">DEMO3</a></dt>
                            </dl>
                        </div>
                    </div>
                </li>
                <li><a href="/news" style="color:white">图谱动态</a></li>
                <li><a href="/about" style="color:white">关于我们</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
<div id="main" style="width:1240px;height:500px; background: #3f3f3f; color: #00aaff; margin-top: 7%; margin-left: 5%;">
    <script>
        var myChart = echarts.init(document.getElementById('main'));
        var geoCoordMap = {
            {#BUPT: [121.4648, 31.2891],#}
            BUPT: [116.40, 39.90],
            Alice: [-4.388361, 11.186148],
            Tomas: [-118.24311, 34.052713],
            Bob: [114.195466, 22.282751],
            Aaron: [-87.801833, 41.870975],
            Jackson: [-4.62829, 7.72415],
            James: [-1.657222, 51.886863],
            Jasper: [10.01959, 54.38474],
            Langston: [45.326912, 41.101891],
            Laurence: [89.116876, 67.757906],
            Parrish: [-48.678945, -10.493623],
            Parker: [31.815593, 31.418032],
            Vincent: [2.175129, 41.385064],
            Vernon: [104.88659, 11.545469],
            Garnett: [9.189948, 45.46623],
            Garry: [-56.162231, -34.901113],
            Farrar: [32.608571, -25.893473],
            Waldron: [3.054275, 36.753027],
            Quinton: [55.269441, 25.204514],
            Zachariah: [17.108519, 48.179162],
            Orlando: [150.993137, -33.675509],
            Oliver: [-121.910642, 41.38028],
            Hancock: [144.999416, -37.781726],
            Hamilton: [-99.094092, 19.365711],
            Calvert: [-123.023921, 49.311753]
        };
        var BJData = [
            [{
                name: "Alice",
                value: 9100
            }, {
                name: "BUPT",
				value: 1399
            }],
            [{
                name: "Tomas",
                value: 2370
            }, {
                name: "BUPT",
				value: 1399
            }],
            [{
                name: "Bob",
                value: 3130
            }, {
                name: "BUPT",
				value: 1399
            }],
            [{
                name: "Aaron",
                value: 2350
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Jackson",
                value: 5120
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "James",
                value: 3110
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Jasper",
                value: 6280
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Langston",
                value: 7255
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Laurence",
                value: 8125
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Parrish",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Parker",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Vincent",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Vernon",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Garnett",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Garry",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Farrar",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Waldron",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Quinton",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Zachariah",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Orlando",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Oliver",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Hancock",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Hamilton",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }],
            [{
                name: "Calvert",
                value: 3590
            }, {
                name: "BUPT",
                value: 1399
            }]
        ];
        var convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var dataItem = data[i];
                var fromCoord = geoCoordMap[dataItem[0].name];
                var toCoord = geoCoordMap[dataItem[1].name];
                if (fromCoord && toCoord) {
                    res.push([{
                        coord: fromCoord,
                        value: dataItem[0].value
                    },
                        {
                            coord: toCoord
                        }
                    ]);
                }
            }
            return res;
        };

        var series = [];
        [
            ["BUPT", BJData]
        ].forEach(function (item, i) {
            series.push({
                    type: "lines",
                    zlevel: 2,
                    effect: {
                        show: true,
                        period: 4, //箭头指向速度，值越小速度越快
                        trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重
                        symbol: "arrow", //箭头图标
                        symbolSize: 5 //图标大小
                    },
                    lineStyle: {
                        normal: {
                            width: 1, //尾迹线条宽度
                            opacity: 0, //尾迹线条透明度
                            curveness: 0.3 //尾迹线条曲直度
                        }
                    },

                    data: convertData(item[1])
                }, {
                    type: "effectScatter",
                    coordinateSystem: "geo",
                    zlevel: 2,
                    rippleEffect: {
                        //涟漪特效
                        period: 4, //动画时间，值越小速度越快
                        brushType: "fill", //波纹绘制方式 stroke, fill
                        scale: 4 //波纹圆环最大限制，值越大波纹越大
                    },
                    label: {
                        normal: {
                            show: true,
                            position: "right", //显示位置
                            offset: [5, 0], //偏移设置
                            formatter: "{b}" //圆环显示文字
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    symbol: "circle",
                    symbolSize: function (val) {
                        return 4 + val[2] / 1000; //圆环大小
                    },
                    itemStyle: {
                        normal: {
                            show: false,
                        }
                    },
                    data: item[1].map(function (dataItem) {
                        return {
                            name: dataItem[0].name,
                            value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])
                        };
                    })
                },
                //被攻击点
                {
                    type: "scatter",
                    coordinateSystem: "geo",
                    zlevel: 2,
                    rippleEffect: {
                        period: 4,
                        brushType: "stroke",
                        scale: 4
                    },
                    label: {
                        normal: {
                            show: true,
                            position: "right",
                            color: "#00ffff",
                            formatter: "{b}",
                            textStyle: {
                                color: "#0bc7f3"
                            }
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    symbol: "pin",
                    symbolSize: 30,
                    itemStyle: {
                        normal: {
                            show: true,
                            color: "#9966cc"
                        }
                    },
                    data: [{
                        name: item[0],
                        value: geoCoordMap[item[0]].concat([100])
                    }]
                }
            );
        });

        option = {
            backgroundColor: '#000',
            tooltip: {
                trigger: "item",
                backgroundColor: "#000",
                borderColor: "#FFFFCC",
                showDelay: 0,
                hideDelay: 0,
                enterable: true,
                transitionDuration: 0,
                extraCssText: "z-index:100",
                formatter: function (params, ticket, callback) {
                    //根据业务自己拓展要显示的内容
                    var res = "";
                    var name = params.name;
                    var value = params.value[params.seriesIndex + 1];
                    res =
                        "<span style='color:#fff;'>" +
                        name +
                        "</span><br/>数据：" +
                        value;
                    return res;
                }
            },
            visualMap: {
                //图例值控制
                min: 0,
                max: 10000,
                show: false,
                calculable: true,
                color: ["#0bc7f3"],
                textStyle: {
                    color: "#fff"
                },

            },
            geo: {
                map: "world",
                label: {
                    emphasis: {
                        show: false
                    }
                },
                roam: true, //是否允许缩放
                layoutCenter: ["50%", "50%"], //地图位置
                layoutSize: "180%",
                itemStyle: {
                    normal: {
                        {#color: "#04284e", //地图背景色#}
                        color: "#901800",
                        borderColor: "#5bc1c9" //省市边界线
                    },
                    emphasis: {
                        color: "rgba(37, 43, 61, .5)" //悬浮背景
                    }
                }
            },

            series: series
        };
        myChart.setOption(option)
    </script>
</div>
</body>
</html>